(this.webpackJsonpvk_miniApp=this.webpackJsonpvk_miniApp||[]).push([[0],{217:function(e,t,n){e.exports=n(333)},333:function(e,t,n){"use strict";n.r(t);n(218),n(244),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286);var a=n(0),r=n.n(a),i=n(41),o=n.n(i),s=n(26),c=n.n(s),u=n(138),f=n(92),l=n.n(f),d=(n(55),n(62)),p=n(63),m=n(68),h=n(67),b=n(64),E=n.n(b),g=n(65),O=n.n(g),_=n(130),F=n.n(_),j=n(87),v=n.n(j),T=n(50),C=n.n(T),N=n(129),D=n.n(N),k=n(66),A=n.n(k),S=n(128),y=n.n(S),G=n(127),I=n.n(G),V=n(126),w=n.n(V),P=function(e){return r.a.createElement(E.a,{id:e.id},r.a.createElement(O.a,null,"TargetHunter"),r.a.createElement(v.a,{title:"User Data Fetched with VK Bridge"},r.a.createElement(C.a,{before:e.photo?r.a.createElement(A.a,{size:80,src:e.photo}):null,description:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442: ".concat(e.age?" ".concat(e.age," \u043b\u0435\u0442"):" \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e.")},"".concat(e.firstName," ").concat(e.secondName))),r.a.createElement(v.a,{title:"Navigation Example"},r.a.createElement(I.a,null,r.a.createElement(C.a,{before:r.a.createElement(w.a,null),indicator:r.a.createElement(y.a,null,e.friendsCount)},"\u0414\u0440\u0443\u0437\u044c\u044f")),r.a.createElement(D.a,null,r.a.createElement(F.a,{size:"xl",level:"2",onClick:e.go,"data-to":"friendsView"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"))))},H=n(60),K=n.n(H),L=n(43),W=n(11),M=function(){return c.a.send("VKWebAppGetUserInfo",{}).then((function(e){var t=e.id;return c.a.send("VKWebAppGetAuthToken",{app_id:7542538,scope:"friends"}).then((function(e){return c.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"32test",params:{user_ids:t,v:"5.120",fields:"counters,bdate,photo_200",access_token:e.access_token}}).then((function(e){return e.response[0]}))}))}))},U=function(e,t){return c.a.send("VKWebAppGetUserInfo",{}).then((function(n){var a=n.id;return c.a.send("VKWebAppGetAuthToken",{app_id:7542538,scope:"friends"}).then((function(n){return c.a.send("VKWebAppCallAPIMethod",{method:"friends.get",request_id:"32test",params:{user_ids:a,v:"5.120",order:"hints",count:e,offset:t,fields:"counters,bdate,photo_200",access_token:n.access_token}}).then((function(e){return e.response}))}))}))},z={photo:null,firstName:null,secondName:null,age:null,friendsCount:null,isFetching:!0},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HOME_PROFILE":return Object(W.a)(Object(W.a)({},e),t.profile);case"TOGGLE_IS_FETCHING":return Object(W.a)(Object(W.a)({},e),{},{isFetching:t.isFetching});default:return Object(W.a)({},e)}},x=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e={photo:this.props.photo,firstName:this.props.firstName,secondName:this.props.secondName,age:this.props.age,friendsCount:this.props.friendsCount};this.props.getHome(e)}},{key:"render",value:function(){return this.props.isFetching?r.a.createElement(K.a,{size:"large",style:{marginTop:20}}):r.a.createElement(P,Object.assign({id:"home",go:this.props.go},this.props))}}]),n}(r.a.Component),q=Object(L.b)((function(e){return{photo:e.home.photo,firstName:e.home.firstName,secondName:e.home.secondName,age:e.home.age,friendsCount:e.home.friendsCount,isFetching:e.home.isFetching}}),{getHome:function(){return function(e){M().then((function(t){var n={photo:t.photo_200,firstName:t.first_name,secondName:t.last_name,friendsCount:t.counters.friends,age:function(){var e=new Date(t.bdate).getFullYear();return!isNaN(e)&&(new Date).getFullYear()-e}()};e(function(e){return{type:"SET_HOME_PROFILE",profile:e}}(n)),e({type:"TOGGLE_IS_FETCHING",isFetching:!1})}))}}})(x),B=n(93),J={numberOfFriends:0,friends:[],friendsCount:30,offset:0,fetchingData:!0},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FRIENDS":return Object(W.a)(Object(W.a)({},e),{},{friends:[].concat(Object(B.a)(e.friends),Object(B.a)(t.friends)),numberOfFriends:t.numberFriends});case"SET_OFFSET":return Object(W.a)(Object(W.a)({},e),{},{offset:t.count});case"TOGGLE_FETCHING_DATA":return Object(W.a)(Object(W.a)({},e),{},{fetchingData:t.fetchingState});case"SET_TO_DEFAULT":return Object(W.a)(Object(W.a)({},e),{},{friends:[],numberOfFriends:0});default:return Object(W.a)({},e)}},Q=function(e){return{type:"SET_OFFSET",count:e}},X=function(e){return{type:"TOGGLE_FETCHING_DATA",fetchingState:e}},Z=n(51),$=n(132),ee=n.n($),te=n(90),ne=n.n(te),ae=n(133),re=n.n(ae),ie=n(134),oe=n.n(ie),se=n(135),ce=n.n(se),ue=n(91),fe=n.n(ue),le=n(322),de=(le.Element,le.animateScroll),pe=Object(Z.c)(),me=function(e){var t=e.friends.map((function(t,n){e.friendsCount,e.offset;return r.a.createElement(C.a,{before:r.a.createElement(A.a,{size:40,src:t.photo_200}),after:r.a.createElement(re.a,null)},"".concat(t.first_name," ").concat(t.last_name))}));return r.a.createElement(E.a,{id:e.id},r.a.createElement(O.a,{left:r.a.createElement(ce.a,{onClick:e.go,"data-to":"homeView"},pe===Z.a?r.a.createElement(ee.a,null):r.a.createElement(ne.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),t,e.offset<e.numberOfFriends?r.a.createElement(fe.a,{before:r.a.createElement(oe.a,null),onClick:function(){e.offset<e.numberOfFriends&&(e.getFriends(e.friendsCount,e.offset,e.numberOfFriends),de.scrollTo(48*(e.offset-1),{}))}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"):r.a.createElement(fe.a,{mode:"danger",before:r.a.createElement(ne.a,null),onClick:e.go,"data-to":"homeView"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"))},he=n(136),be=n.n(he),Ee=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getFriends(this.props.friendsCount,this.props.offset)}},{key:"componentWillUnmount",value:function(){this.props.setDefaultData()}},{key:"render",value:function(){return this.props.fetchingData?r.a.createElement(be.a,null):r.a.createElement(me,Object.assign({id:"friends",go:this.props.go},this.props))}}]),n}(r.a.Component),ge=Object(L.b)((function(e){return{friends:e.friendsPage.friends,friendsCount:e.friendsPage.friendsCount,offset:e.friendsPage.offset,fetchingData:e.friendsPage.fetchingData,numberOfFriends:e.friendsPage.numberOfFriends}}),{getFriends:function(e,t){return function(n){n(X(!0)),U(e,t).then((function(a){var r,i;n((r=a.items,i=a.count,{type:"SET_FRIENDS",friends:r,numberFriends:i})),n(X(!1)),n(Q(t+e))}))}},setDefaultData:function(){return function(e){e({type:"SET_TO_DEFAULT"}),e(Q(0)),e(X(!0))}}})(Ee),Oe=function(){var e=Object(a.useState)("homeView"),t=Object(u.a)(e,2),n=t[0],i=t[1],o=function(e){i(e.currentTarget.dataset.to)};return r.a.createElement(Z.b,{activeView:n},r.a.createElement(l.a,{id:"homeView",activePanel:"home"},r.a.createElement(q,{id:"home",go:o})),r.a.createElement(l.a,{id:"friendsView",activePanel:"friends"},r.a.createElement(ge,{id:"friends",go:o})))},_e=n(44),Fe=n(137),je=Object(_e.c)({home:R,friendsPage:Y}),ve=Object(_e.d)(je,Object(_e.a)(Fe.a));c.a.send("VKWebAppInit"),o.a.render(r.a.createElement(L.a,{store:ve},r.a.createElement(Oe,null)),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.ee9ce633.chunk.js.map