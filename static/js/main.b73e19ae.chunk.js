(this.webpackJsonpvk_miniApp=this.webpackJsonpvk_miniApp||[]).push([[0],{217:function(e,t,n){e.exports=n(333)},333:function(e,t,n){"use strict";n.r(t);n(218),n(244),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286);var a=n(0),r=n.n(a),o=n(41),i=n.n(o),c=n(26),s=n.n(c),u=n(138),f=n(92),l=n.n(f),d=(n(55),n(62)),p=n(63),m=n(68),h=n(67),E=n(64),b=n.n(E),g=n(65),O=n.n(g),_=n(130),F=n.n(_),j=n(87),v=n.n(j),T=n(50),C=n.n(T),N=n(129),A=n.n(N),D=n(66),k=n.n(D),w=n(128),S=n.n(w),y=n(127),G=n.n(y),I=n(126),V=n.n(I),P=function(e){return r.a.createElement(b.a,{id:e.id},r.a.createElement(O.a,null,"TargetHunter"),r.a.createElement(v.a,{title:"User Data Fetched with VK Bridge"},r.a.createElement(C.a,{before:e.photo?r.a.createElement(k.a,{size:80,src:e.photo}):null,description:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442: ".concat(e.age?" ".concat(e.age," \u043b\u0435\u0442"):" \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e.")},"".concat(e.firstName," ").concat(e.secondName))),r.a.createElement(v.a,{title:"Navigation Example"},r.a.createElement(G.a,null,r.a.createElement(C.a,{before:r.a.createElement(V.a,null),indicator:r.a.createElement(S.a,null,e.friendsCount)},"\u0414\u0440\u0443\u0437\u044c\u044f")),r.a.createElement(A.a,null,r.a.createElement(F.a,{size:"xl",level:"2",onClick:e.go,"data-to":"friendsView"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"))))},H=n(60),K=n.n(H),L=n(43),U=n(11),W=function(){return s.a.send("VKWebAppGetUserInfo",{}).then((function(e){var t=e.id;return s.a.send("VKWebAppGetAuthToken",{app_id:7542538,scope:"friends"}).then((function(e){return s.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"32test",params:{user_ids:t,v:"5.120",fields:"counters,bdate,photo_200",access_token:e.access_token}}).then((function(e){return e.response[0]}))}))})).catch((function(e){throw new Error("Error Auth User: "+e)}))},M=function(e,t){return s.a.send("VKWebAppGetUserInfo",{}).then((function(n){var a=n.id;return s.a.send("VKWebAppGetAuthToken",{app_id:7542538,scope:"friends"}).then((function(n){return s.a.send("VKWebAppCallAPIMethod",{method:"friends.get",request_id:"32test",params:{user_ids:a,v:"5.120",order:"hints",count:e,offset:t,fields:"counters,bdate,photo_200",access_token:n.access_token}}).then((function(e){return e.response}))}))})).catch((function(e){throw new Error("Error Auth User: "+e)}))},z={photo:null,firstName:null,secondName:null,age:null,friendsCount:null,isFetching:!0},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HOME_PROFILE":return Object(U.a)(Object(U.a)({},e),t.profile);case"TOGGLE_IS_FETCHING":return Object(U.a)(Object(U.a)({},e),{},{isFetching:t.isFetching});default:return Object(U.a)({},e)}},x=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e={photo:this.props.photo,firstName:this.props.firstName,secondName:this.props.secondName,age:this.props.age,friendsCount:this.props.friendsCount};this.props.getHome(e)}},{key:"render",value:function(){return this.props.isFetching?r.a.createElement(K.a,{size:"large",style:{marginTop:20}}):r.a.createElement(P,Object.assign({id:"home",go:this.props.go},this.props))}}]),n}(r.a.Component),q=Object(L.b)((function(e){return{photo:e.home.photo,firstName:e.home.firstName,secondName:e.home.secondName,age:e.home.age,friendsCount:e.home.friendsCount,isFetching:e.home.isFetching}}),{getHome:function(){return function(e){W().then((function(t){var n={photo:t.photo_200,firstName:t.first_name,secondName:t.last_name,friendsCount:t.counters.friends,age:function(){var e=new Date(t.bdate).getFullYear();return!isNaN(e)&&(new Date).getFullYear()-e}()};e(function(e){return{type:"SET_HOME_PROFILE",profile:e}}(n)),e({type:"TOGGLE_IS_FETCHING",isFetching:!1})}))}}})(x),B=n(93),J={numberOfFriends:0,friends:[],friendsCount:30,offset:0,fetchingData:!0},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FRIENDS":return Object(U.a)(Object(U.a)({},e),{},{friends:[].concat(Object(B.a)(e.friends),Object(B.a)(t.friends)),numberOfFriends:t.numberFriends});case"SET_OFFSET":return Object(U.a)(Object(U.a)({},e),{},{offset:t.count});case"TOGGLE_FETCHING_DATA":return Object(U.a)(Object(U.a)({},e),{},{fetchingData:t.fetchingState});case"SET_TO_DEFAULT":return Object(U.a)(Object(U.a)({},e),{},{friends:[],numberOfFriends:0});default:return Object(U.a)({},e)}},Q=function(e){return{type:"SET_OFFSET",count:e}},X=function(e){return{type:"TOGGLE_FETCHING_DATA",fetchingState:e}},Z=n(51),$=n(132),ee=n.n($),te=n(90),ne=n.n(te),ae=n(133),re=n.n(ae),oe=n(134),ie=n.n(oe),ce=n(135),se=n.n(ce),ue=n(91),fe=n.n(ue),le=n(322).animateScroll,de=Object(Z.c)(),pe=function(e){var t=e.friends.map((function(e,t){return r.a.createElement(C.a,{before:r.a.createElement(k.a,{size:40,src:e.photo_200}),after:r.a.createElement(re.a,null)},"".concat(e.first_name," ").concat(e.last_name))}));return r.a.createElement(b.a,{id:e.id},r.a.createElement(O.a,{left:r.a.createElement(se.a,{onClick:e.go,"data-to":"homeView"},de===Z.a?r.a.createElement(ee.a,null):r.a.createElement(ne.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),t,e.offset<e.numberOfFriends?r.a.createElement(fe.a,{before:r.a.createElement(ie.a,null),onClick:function(){e.offset<e.numberOfFriends&&(e.getFriends(e.friendsCount,e.offset),le.scrollTo(48*(e.offset-1),{}))}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"):r.a.createElement(fe.a,{mode:"danger",before:r.a.createElement(ne.a,null),onClick:e.go,"data-to":"homeView"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"))},me=n(136),he=n.n(me),Ee=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getFriends(this.props.friendsCount,this.props.offset)}},{key:"componentWillUnmount",value:function(){this.props.setDefaultData()}},{key:"render",value:function(){return this.props.fetchingData?r.a.createElement(he.a,null):r.a.createElement(pe,Object.assign({id:"friends",go:this.props.go},this.props))}}]),n}(r.a.Component),be=Object(L.b)((function(e){return{friends:e.friendsPage.friends,friendsCount:e.friendsPage.friendsCount,offset:e.friendsPage.offset,fetchingData:e.friendsPage.fetchingData,numberOfFriends:e.friendsPage.numberOfFriends}}),{getFriends:function(e,t){return function(n){n(X(!0)),M(e,t).then((function(a){var r,o;n((r=a.items,o=a.count,{type:"SET_FRIENDS",friends:r,numberFriends:o})),n(X(!1)),n(Q(t+e))}))}},setDefaultData:function(){return function(e){e({type:"SET_TO_DEFAULT"}),e(Q(0)),e(X(!0))}}})(Ee),ge=function(){var e=Object(a.useState)("homeView"),t=Object(u.a)(e,2),n=t[0],o=t[1],i=function(e){o(e.currentTarget.dataset.to)};return r.a.createElement(Z.b,{activeView:n},r.a.createElement(l.a,{id:"homeView",activePanel:"home"},r.a.createElement(q,{id:"home",go:i})),r.a.createElement(l.a,{id:"friendsView",activePanel:"friends"},r.a.createElement(be,{id:"friends",go:i})))},Oe=n(44),_e=n(137),Fe=Object(Oe.c)({home:R,friendsPage:Y}),je=Object(Oe.d)(Fe,Object(Oe.a)(_e.a));s.a.send("VKWebAppInit"),i.a.render(r.a.createElement(L.a,{store:je},r.a.createElement(ge,null)),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.b73e19ae.chunk.js.map